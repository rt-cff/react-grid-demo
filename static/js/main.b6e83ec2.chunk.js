(this["webpackJsonpreact-grid-demo"]=this["webpackJsonpreact-grid-demo"]||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},19:function(e,t,n){},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(10),o=n.n(r),i=(n(19),n(12)),u=n(5),l=n(2),s=n(1),d=n(13),m=Object(a.memo)((function(e){e.x,e.y;var t=e.col;return c.a.createElement("div",{className:"react-grid-header-cell",style:{width:t.width}},t.name)})),f=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.cols;return c.a.createElement("div",{ref:t,className:"react-grid-header"},n.map((function(e){return c.a.createElement(m,{col:e})})))}))),b=Object(a.memo)((function(e){var t=e.columnIndex,n=e.rowIndex,r=e.data,o=e.width,i=e.setMask,u=Object(a.useCallback)((function(){return i(t,n)}),[i,t,n]);return c.a.createElement("div",{className:"react-grid-cell",style:{width:o},onClick:u},r)})),h=Object(a.memo)((function(e){var t=e.rowIndex,n=e.cols,r=e.data,o=e.setMask,i=Object(a.useMemo)((function(){return n.map((function(e,n){return c.a.createElement(b,{key:n,rowIndex:t,columnIndex:n,type:e.type,data:r[e.id],width:e.width,setMask:o})}))}),[t,n,r,o]);return c.a.createElement("div",{className:"react-grid-row"},i)})),y=[37,38,39,40],p=function(e){var t=e.setMask,n=e.x,r=e.y,o=e.left,i=e.top,u=e.value,l=void 0===u?null:u,d=e.onChange,m=e.width,f=e.type,b=Object(a.useRef)(null),h=Object(a.useRef)(null),p=Object(a.useRef)(null),v=Object(a.useState)(!1),w=Object(s.a)(v,2),j=w[0],O=w[1],g=Object(a.useState)(l),k=Object(s.a)(g,2),E=k[0],x=k[1],C=Object(a.useCallback)((function(){return O((function(e){return!e}))}),[]),M=Object(a.useCallback)((function(){C(),l!==E&&d(E)}),[C,l,E]),I=Object(a.useCallback)((function(e){var a=e.target,c=e.keyCode;a===b.current&&(y.includes(c)&&t(n+(c-38)%2,r+(c-39)%2),13===c&&C(),e.preventDefault()),a===p.current&&(27===c&&O(!1),13===c&&M())}),[n,r,t,C,M]);return Object(a.useEffect)((function(){x(l)}),[n,r,l]),Object(a.useEffect)((function(){b&&b.current&&!j&&(console.log("focus"),b.current.focus(),b.current.scrollIntoView({block:"nearest",inline:"nearest"}))}),[n,r,j]),n>=0&&r>=0?c.a.createElement("div",{className:"react-grid-mask-container",tabIndex:0,ref:b,style:{width:m,top:i,left:o},onKeyDown:I},j?c.a.createElement("input",{autoFocus:!0,ref:p,className:"react-grid-mask-input",onBlur:M,onChange:function(e){var t=e.target.type,n=e.target.value;"number"===t&&(n=parseFloat(n),isNaN(n))||x(n)},defaultValue:E,type:f||"text"}):c.a.createElement("div",{className:"react-grid-mask",ref:h,onClick:C})):null},v=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(100),i=Object(s.a)(o,2),u=i[0],l=i[1];return[e.slice(c,u),c,function(t){var n=t.target,a=n.scrollLeft,c=n.scrollTop;console.log(c,a);var o=Math.max(0,Math.floor(c/30)-30),i=Math.min(e.length,o+100);r(o),l(i)}]},w=function(e,t){var n=v(e),a=Object(s.a)(n,3),c=a[0],r=a[1],o=a[2];return[c,r,function(e){o(e),t.current.scrollLeft=e.target.scrollLeft}]},j=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(),i=Object(s.a)(o,2),u=i[0],l=i[1],d=c>=0?e[c]:{},m=Object(a.useCallback)((function(e,t){r(e),l(t)}),[r,l]);return{x:c,y:u,left:e.slice(0,c).reduce((function(e,t){return e+t.width}),0),top:30*u,width:d.width,type:d.type,setMask:m}},O=function(){document.documentElement.style.setProperty("--scroll-bar-size",function(){var e,t=document.createElement("div");return t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,document.body.removeChild(t),e}()+"px")},g=(n(20),Object(a.memo)((function(e){var t=e.cols,n=void 0===t?[]:t,r=e.data,o=void 0===r?[]:r,i=e.onRowClick,u=e.style,m=void 0===u?{}:u,b=e.height,y=e.width,v=e.onChange,g=Object(a.createRef)(),k=Object(a.useRef)(),E=j(n),x=E.setMask,C=E.x,M=E.y,I=Object(d.a)(E,["setMask","x","y"]),N=w(o,g),S=Object(s.a)(N,3),R=S[0],q=S[1],T=S[2],W=Object(a.useMemo)((function(){return R.map((function(e,t){return c.a.createElement(h,{key:q+t,rowIndex:q+t,cols:n,data:e,onRowClick:i,setMask:x})}))}),[R,q,n,i,x]);Object(a.useEffect)((function(){O()}),[]);var A=Object(l.a)(Object(l.a)({},m),{},{height:b,width:y}),B=Object(a.useCallback)((function(e){return v({rowId:M,row:o[M],id:n[C].id,value:e})}),[C,M,o,n]);return c.a.createElement("div",{style:A,className:"react-grid"},c.a.createElement(f,{ref:g,cols:n}),c.a.createElement("div",{ref:k,className:"react-grid-content",onScroll:T},c.a.createElement("div",{style:{height:30*o.length}},c.a.createElement(p,Object.assign({},I,{x:C,y:M,value:C>=0&&M>=0?o[M][n[C].id]:null,onChange:B,setMask:x})),c.a.createElement("div",{style:{position:"absolute",top:30*q}},W))))}))),k=n(11),E=[{id:"type",name:"Type",width:300},{id:"quantity",name:"Quantity",type:"number",width:100},{id:"amount",name:"Amount",type:"number",width:300},{id:"type",name:"Type",width:300},{id:"quantity",name:"Quantity",type:"number",width:100},{id:"amount",name:"Amount",type:"number",width:300},{id:"type",name:"Type",width:300},{id:"quantity",name:"Quantity",type:"number",width:100},{id:"amount",name:"Amount",type:"number",width:300}],x=n.n(k)()(1e4).map((function(e){return{type:"3321",amount:100*Math.random(),quantity:e}}));var C=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=(t[0],t[1]),r=Object(a.useState)(x),o=Object(s.a)(r,2),d=o[0],m=o[1];return c.a.createElement("div",{style:{width:"80vw",height:"calc(100vh - 80px)",margin:"0 auto"}},c.a.createElement("button",{onClick:function(){return n(Math.random())}},"REFRESH"),c.a.createElement(g,{cols:E,data:d,onChange:function(e){var t=e.rowId,n=e.row,a=e.id,c=e.value;console.log(t,n,a,c),d[t]=Object(l.a)(Object(l.a)({},d[t]),{},Object(u.a)({},a,c)),m(Object(i.a)(d))},width:700,height:400}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.b6e83ec2.chunk.js.map