(this["webpackJsonpreact-grid-demo"]=this["webpackJsonpreact-grid-demo"]||[]).push([[0],{14:function(e,t,n){e.exports=n(40)},21:function(e,t,n){},22:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(10),o=n.n(r),i=(n(21),n(12)),l=n(5),u=n(2),s=n(1),d=n(13),m=Object(a.memo)((function HeaderCell(e){e.x,e.y;var t=e.col;return c.a.createElement("div",{className:"react-grid-header-cell",style:{width:t.width}},t.name)})),f=Object(a.memo)(Object(a.forwardRef)((function Header(e,t){var n=e.cols;return c.a.createElement("div",{ref:t,className:"react-grid-header"},n.map((function(e){return c.a.createElement(m,{col:e})})))}))),b=Object(a.memo)((function Cell(e){var t=e.columnIndex,n=e.rowIndex,r=e.data,o=e.width,i=e.setMask,l=Object(a.useCallback)((function(){return i(t,n)}),[i,t,n]);return c.a.createElement("div",{className:"react-grid-cell",style:{width:o},onClick:l},r)})),h=Object(a.memo)((function Row(e){var t=e.rowIndex,n=e.cols,r=e.data,o=e.setMask,i=Object(a.useMemo)((function(){return n.map((function(e,n){return c.a.createElement(b,{key:n,rowIndex:t,columnIndex:n,type:e.type,data:r[e.id],width:e.width,setMask:o})}))}),[t,n,r,o]);return c.a.createElement("div",{className:"react-grid-row"},i)})),y=[37,38,39,40],p=function Mask(e){var t=e.setMask,n=e.x,r=e.y,o=e.left,i=e.top,l=e.value,u=void 0===l?null:l,d=e.onChange,m=e.width,f=e.type,b=Object(a.useRef)(null),h=Object(a.useRef)(null),p=Object(a.useRef)(null),w=Object(a.useState)(!1),v=Object(s.a)(w,2),j=v[0],O=v[1],g=Object(a.useState)(u),k=Object(s.a)(g,2),E=k[0],C=k[1],x=Object(a.useCallback)((function(){return O((function(e){return!e}))}),[]),M=Object(a.useCallback)((function(){x(),u!==E&&d(E)}),[x,u,E]),S=Object(a.useCallback)((function(e){var a=e.target,c=e.keyCode;a===b.current&&(y.includes(c)&&t(n+(c-38)%2,r+(c-39)%2),13===c&&x(),e.preventDefault()),a===p.current&&(27===c&&O(!1),13===c&&M())}),[n,r,t,x,M]);return Object(a.useEffect)((function(){C(u)}),[n,r,u]),Object(a.useEffect)((function(){b&&b.current&&!j&&(console.log("focus"),b.current.focus(),b.current.scrollIntoView({block:"nearest",inline:"nearest"}))}),[n,r,j]),n>=0&&r>=0?c.a.createElement("div",{className:"react-grid-mask-container",tabIndex:0,ref:b,style:{width:m,top:i,left:o},onKeyDown:S},j?c.a.createElement("input",{autoFocus:!0,ref:p,className:"react-grid-mask-input",onBlur:M,onChange:function handleChange(e){var t=e.target.type,n=e.target.value;"number"===t&&(n=parseFloat(n),isNaN(n))||C(n)},defaultValue:E,type:f||"text"}):c.a.createElement("div",{className:"react-grid-mask",ref:h,onClick:x})):null},w=function useVirtualization(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(100),i=Object(s.a)(o,2),l=i[0],u=i[1];return[e.slice(c,l),c,function handleScroll(t){var n=t.target,a=n.scrollLeft,c=n.scrollTop;console.log(c,a);var o=Math.max(0,Math.floor(c/30)-30),i=Math.min(e.length,o+100);r(o),u(i)}]},v=function useGrid(e,t){var n=w(e),a=Object(s.a)(n,3),c=a[0],r=a[1],o=a[2];return[c,r,function handleScroll(e){o(e),t.current.scrollLeft=e.target.scrollLeft}]},j=function useMask(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(),i=Object(s.a)(o,2),l=i[0],u=i[1],d=c>=0?e[c]:{},m=Object(a.useCallback)((function(e,t){r(e),u(t)}),[r,u]);return{x:c,y:l,left:e.slice(0,c).reduce((function(e,t){return e+t.width}),0),top:30*l,width:d.width,type:d.type,setMask:m}},O=function setScrollBarSizeCSSVariable(){document.documentElement.style.setProperty("--scroll-bar-size",function getScrollbarSize(){var e,t=document.createElement("div");return t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,document.body.removeChild(t),e}()+"px")},g=(n(22),Object(a.memo)((function Grid(e){var t=e.cols,n=void 0===t?[]:t,r=e.data,o=void 0===r?[]:r,i=e.onRowClick,l=e.style,m=void 0===l?{}:l,b=e.height,y=e.width,w=e.onChange,g=Object(a.createRef)(),k=Object(a.useRef)(),E=j(n),C=E.setMask,x=E.x,M=E.y,S=Object(d.a)(E,["setMask","x","y"]),I=v(o,g),N=Object(s.a)(I,3),R=N[0],q=N[1],z=N[2],A=Object(a.useMemo)((function(){return R.map((function(e,t){return c.a.createElement(h,{key:q+t,rowIndex:q+t,cols:n,data:e,onRowClick:i,setMask:C})}))}),[R,q,n,i,C]);Object(a.useEffect)((function(){O()}),[]);var B=Object(u.a)(Object(u.a)({},m),{},{height:b,width:y}),T=Object(a.useCallback)((function(e){return w({rowId:M,row:o[M],id:n[x].id,value:e})}),[x,M,o,n]);return c.a.createElement("div",{style:B,className:"react-grid"},c.a.createElement(f,{ref:g,cols:n}),c.a.createElement("div",{ref:k,className:"react-grid-content",onScroll:z},c.a.createElement("div",{style:{height:30*o.length}},c.a.createElement(p,Object.assign({},S,{x:x,y:M,value:x>=0&&M>=0?o[M][n[x].id]:null,onChange:T,setMask:C})),c.a.createElement("div",{style:{position:"absolute",top:30*q}},A))))}))),k=n(11),E=[{id:"type",name:"Type",width:300},{id:"quantity",name:"Quantity",type:"number",width:100},{id:"amount",name:"Amount",type:"number",width:300},{id:"type",name:"Type",width:300},{id:"quantity",name:"Quantity",type:"number",width:100},{id:"amount",name:"Amount",type:"number",width:300},{id:"type",name:"Type",width:300},{id:"quantity",name:"Quantity",type:"number",width:100},{id:"amount",name:"Amount",type:"number",width:300}],C=n.n(k)()(1e4).map((function(e){return{type:"3321",amount:100*Math.random(),quantity:e}}));var x=function App(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=(t[0],t[1]),r=Object(a.useState)(C),o=Object(s.a)(r,2),d=o[0],m=o[1];return c.a.createElement("div",{style:{width:"80vw",height:"calc(100vh - 80px)",margin:"0 auto"}},c.a.createElement("button",{onClick:function onClick(){return n(Math.random())}},"REFRESH"),c.a.createElement(g,{cols:E,data:d,onChange:function onChange(e){var t=e.rowId,n=e.row,a=e.id,c=e.value;console.log(t,n,a,c),d[t]=Object(u.a)(Object(u.a)({},d[t]),{},Object(l.a)({},a,c)),m(Object(i.a)(d))},width:700,height:400}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(x,null)),document.getElementById("root")),function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}()}},[[14,1,2]]]);
//# sourceMappingURL=main.938a26e7.chunk.js.map